<% content_for :navbar_id, "navbar_home" %>
<div class="lessen-banner">
  <div class="lessen-banner-content">
    <div class="titles-banner">
      <h1>Cours particuliers en direct, quand vous le souhaitez</h1>
      <div id="textSlider">
        <div class="scroller">
          <div class="inner">
            <p>Plus d'élèves participent, plus le prix diminue</p>
            <p>Partage le cours de ton choix avec tes amis</p>
          </div>
        </div>
      </div>
    </div>
    <div class="search-group">
    <%= simple_form_for :query, method: :get, url: lessons_path, html: { class: "search-bar-home" }  do |f| %>
      <%= f.input :grade, label: false, collection: Lesson::GRADES, selected: @grade, include_blank: "Select your grade", required: false, wrapper_html: { class: "query_grade_home" } %>
      <%= f.input :topic, label: false, collection: Lesson::TOPICS, selected: @topic, include_blank: "Select your subject", required: false, wrapper_html: { class: "query_topic_home" } %>
      <button type="submit" id="search-button-home"> <i class="btn-lessen-search fas fa-search"></i></button>
    <% end %>
    </div>
  </div>
</div>




<div class="container-how">
  <div class="row-how-first">
    <h2>Vos professeurs préférés, accessibles dans le monde entier</h2>
  </div>
  <div class="row-how-second">
    <div class="image-student"><%= image_tag("student.png", height: 270) %></div>
    <div class="lign-how-icon">
      <div class="bordure-how"></div>
      <div class="icon-first">
        <div class="circle-how"><%= image_tag("education.png", height: 80) %></div>
        <div class="text-icon"><p>Select</p></div>
      </div>
      <div class="icon-second">
        <div class="circle-how"><%= image_tag("sign.png", height: 70) %></div>
        <div class="text-icon"><p>Sign up</p></div>
      </div>
      <div class="icon-third">
        <div class="circle-how"><%= image_tag("record.png", height: 60) %></div>
        <div class="text-icon"><p>Watch</p></div>
      </div>
    </div>
    <div class="image-teacher"><%= image_tag("teacher.png", height: 270) %></div>
  </div>
</div>

<div class="cards-container">
  <h2>Mathématiques</h2>
  <div class="row">
    <% @maths_lessons.each do |lesson| %>
      <div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
        <div class="lesson-card">
          <%= link_to "", lesson_path(lesson), class: "card-link" %>
          <div class="card-header">
            <div class="card-title">
              <h4> <%= lesson.topic %></h4>
              <h5><em><%= lesson.subtopic %></em></h5>
              </div>
            <div class="card-date">
              <p><%= lesson.starts_at.split(":").join("H") %></p>
              <em><%= lesson.date.to_s.split("-").reverse.join("/") %></em>
            </div>
          </div>
          <div class="card-body math-color">
            <div class="card-position-triangle">
              <svg class="card-triangle" height="80" width="300">
                <polygon points="295 0 295 80 0 80" class="math-color" preserveAspectRatio="xMinYMax slice" / >
              </svg>
            </div>
            <div class="card-lesson-info">
              <button class="card-price-button"><%= lesson.next_price_per_user.round(1) %> €</button>
              <h2><%= lesson.name %></h2>
              <p><%= lesson.description.first(300) %></p>
            </div>
          </div>


          <div class="card-footer math-color">
            <img src="<%= asset_path("user-default.jpg") %>" alt="" class="avatar-card">
            <div class="professor-info">
              <p><%=  lesson.teacher.first_name + " " + lesson.teacher.last_name%></p>
                <div class="card-stars">
                  <% sum = 0 %>
                  <%  lesson.teacher.reviews.each do |review| %>
                    <% sum += review.rating %>
                  <% end %>
                  <%  rating = sum.fdiv(lesson.teacher.reviews.count).round%>
                  <% rating.times do  %>
                    <i class="fas fa-star"></i>
                  <% end %>
                </div>
            </div>
          </div>
        </div>
      </div>
    <% end %>
  </div>
  <h2>Français</h2>
  <div class="row">
    <% @french_lessons.each do |lesson| %>
      <div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
        <div class="lesson-card">
          <%= link_to "", lesson_path(lesson), class: "card-link" %>
          <div class="card-header">
            <div class="card-title">
              <h4> <%= lesson.topic %></h4>
              <h5><em><%= lesson.subtopic %></em></h5>
            </div>
            <div class="card-date">
              <p><%= lesson.starts_at.split(":").join("H") %></p>
              <em><%= lesson.date.to_s.split("-").reverse.join("/") %></em>
            </div>
          </div>

          <div class="card-body french-color">
            <div class="card-position-triangle">
              <svg class="card-triangle" height="80" width="300">
                <polygon points="295 0 295 80 0 80" class="french-color" preserveAspectRatio="xMinYMax slice" / >
              </svg>
            </div>
            <div class="card-lesson-info">
              <button class="card-price-button"><%= lesson.next_price_per_user.round(1) %> €</button>
              <h2><%= lesson.name %></h2>
              <p><%= lesson.description.first(300) %></p>
            </div>
          </div>
          <div class="card-footer french-color">
            <img src="<%= asset_path("user-default.jpg") %>" alt="" class="avatar-card">
            <div class="professor-info">
              <p><%=  lesson.teacher.first_name + " " + lesson.teacher.last_name%></p>
              <div class="card-stars">
                <% 5.times do  %>
                  <i class="fas fa-star"></i>
                <% end %>
              </div>
           </div>
         </div>
        </div>
      </div>
    <% end %>
  </div>
</div>


<!--
 style="background-image: linear-gradient(rgba(0,0,0,0.1), rgba(0,0,0,0.2)), url('https://images.officeworks.com.au/api/2/img/https://s3-ap-southeast-2.amazonaws.com/wc-prod-pim/JPEG_1000x1000/JA0352400_B_helix_oxford_blue_9_piece_maths_set.jpg/resize?size=706&auth=MjA5OTcwODkwMg__');"
 -->
